<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zome Valdivia</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Canvas 3D -->
    <div id="canvas-container"></div>

    <!-- Quick Info (visible siempre) -->
    <div id="quickInfo" class="quick-info">
        <button id="toggleInfoBtn" class="toggle-info-btn">üìä</button>
        <div class="info-content">
            <div class="info-item">
                <span class="info-label">H visible:</span>
                <span id="infoH" class="info-value">0.00</span>
            </div>
            <div class="info-item">
                <span class="info-label">h‚ÇÅ:</span>
                <span id="infoH1" class="info-value">0.000</span>
            </div>
            <div class="info-item">
                <span class="info-label">Caras:</span>
                <span id="infoFaces" class="info-value">0</span>
            </div>
        </div>
    </div>

    <!-- Main Controls -->
    <div id="mainControls" class="control-panel">
        <div class="panel-header">
            <span id="statusBadge" class="status-badge">N=11 ¬∑ Œ±=39.8¬∞</span>
        </div>

        <div class="param-group-inline" id="dmaxControl">
            <label>Dmax (ecuador)</label>
            <input type="number" class="param-input-inline" id="dmaxNum" value="10" min="0.1" max="50" step="0.1">
            <input type="range" class="param-slider-inline" id="dmaxRange" value="10" min="0.1" max="50" step="0.1">
        </div>

        <!-- ‚úÖ NUEVO CONTROL: Di√°metro del piso -->
        <div class="param-group-inline" id="floorDiameterControl" style="display: none;">
            <label>√ò del piso</label>
            <input type="number" class="param-input-inline" id="floorDiameterNum" value="5" min="0.1" max="50" step="0.1">
            <input type="range" class="param-slider-inline" id="floorDiameterRange" value="5" min="0.1" max="50" step="0.1">
        </div>

        <div class="param-group-inline">
            <label>N (lados)</label>
            <input type="number" class="param-input-inline" id="nNum" value="11" min="3" max="20" step="1">
            <input type="range" class="param-slider-inline" id="nRange" value="11" min="3" max="20" step="1">
        </div>

        <div class="param-group-inline">
            <label>Œ± (√°ngulo)</label>
            <input type="number" class="param-input-inline" id="aNum" value="39.8" min="0.1" max="89.9" step="0.1">
            <input type="range" class="param-slider-inline" id="aRange" value="39.8" min="0.1" max="89.9" step="0.1">
        </div>

        <!-- Bot√≥n para abrir panel avanzado -->
        <button id="toggleAdvancedBtn" class="btn btn-secondary">‚öôÔ∏è Controles avanzados</button>
    </div>

    <!-- Advanced Panel (Overlay Modal) -->
    <div id="advancedPanel" class="advanced-panel">
        <div class="advanced-content">
            <div class="advanced-header">
                <h3>Controles Avanzados</h3>
                <button id="closeAdvancedBtn" class="close-btn">‚úï</button>
            </div>

            <div class="advanced-body">
                <!-- Visualizaci√≥n -->
                <div class="control-section">
                    <h4>Visualizaci√≥n</h4>
                    <div class="button-grid">
                        <button id="facesBtn" class="btn">Caras</button>
                        <button id="togglePolysBtn" class="btn primary">Pol√≠gonos</button>
                        <button id="toggleLinesBtn" class="btn primary">Aristas</button>
                        <button id="toggleAxisBtn" class="btn primary">Eje</button>
                    </div>
                </div>

                <!-- Skin -->
                <div class="control-section">
                    <h4>Skin</h4>
                    <button id="colorByLevelBtn" class="btn">Skin Cristal</button>
                </div>

                <!-- Plano de corte -->
                <div class="control-section">
                    <h4>Plano de corte</h4>
                    <button id="cutBtn" class="btn">Crear porci√≥n</button>
                    <div id="cutControls" class="cut-controls">
                        <label>Niveles visibles</label>
                        <input type="number" class="param-input-inline" id="cutLevelNum" value="5" min="1" max="10" step="1">
                        <input type="range" class="param-slider-inline" id="cutLevelRange" value="5" min="1" max="10" step="1">
                    </div>
                </div>

                <!-- Rotaci√≥n -->
                <div class="control-section">
                    <h4>Rotaci√≥n</h4>
                    <button id="rotationBtn" class="btn">Rotar</button>
                    <div class="rotation-controls">
                        <label>Velocidad</label>
                        <input type="range" id="rotationSpeed" min="0" max="100" value="30" step="1">
                    </div>
                </div>

                <!-- C√°mara -->
                <div class="control-section">
                    <h4>C√°mara</h4>
                    <button id="fitBtn" class="btn">Ajustar vista</button>
                </div>

                <!-- Informaci√≥n Geom√©trica -->
                <div class="control-section">
                    <h4>Info Geom√©trica</h4>
                    <div class="geometry-info">
                        <div class="info-row">
                            <span id="diameterLabel">Dmax</span>
                            <span id="infoDiameter">10.00</span>
                        </div>
                        <div class="info-row">
                            <span>Lado rombo</span>
                            <span id="infoRhombusSide">0.000</span>
                        </div>
                        <div class="info-row" id="triangleBaseInfo" style="display: none;">
                            <span>Base tri√°ngulo</span>
                            <span id="infoTriangleBase">0.000</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>